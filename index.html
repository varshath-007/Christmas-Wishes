<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Merry Christmas üéÑ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#ffe6f0,#ffffff);
  overflow-x:hidden;
}

/* Page layout */
.page{
  display:none;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:20px;
}
.page.active{display:flex;}

/* Inputs & buttons */
input,button{
  padding:12px;
  font-size:16px;
  margin:10px;
  border-radius:8px;
  border:none;
}
button{
  background:#ff6fa5;
  color:white;
  cursor:pointer;
}

/* Static characters */
.corner{
  position:fixed;
  bottom:0;
  width:240px;
  z-index:2;
}
.corner.left{left:0;}
.corner.right{right:0;}

/* Walking Santa (gift page only) */
#santaWalk{
  position:fixed;
  bottom:180px;
  left:-260px;
  width:180px;
  z-index:3;
}

/* Snow */
.snow{
  position:fixed;
  top:-10px;
  color:white;
  animation:snowfall linear infinite;
  z-index:1;
}
@keyframes snowfall{
  to{transform:translateY(110vh);}
}

/* Card */
.card-container{perspective:1000px;}
.card{
  width:260px;
  height:160px;
  margin:30px auto;
  transform-style:preserve-3d;
  transition:0.8s;
}
.card.flip{transform:rotateY(180deg);}
.face{
  position:absolute;
  width:100%;
  height:100%;
  backface-visibility:hidden;
  border-radius:15px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}
.front{background:#ffb6d5;}
.back{
  background:#fff;
  transform:rotateY(180deg);
}
</style>
</head>

<body>

<!-- Static characters -->
<img src="grinch.png" class="corner left">
<img src="santa.png" class="corner right">

<!-- Audio -->
<audio id="music" src="music.mp3" loop></audio>
<audio id="bell" src="bell.mp3"></audio>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <h2>üéÑ Enter your name</h2>
  <input id="nameInput" placeholder="Your name" onclick="startMusic()">
  <button onclick="submitName()">Continue</button>
  <div id="list"></div>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <h1 id="wish"></h1>
  <p>Do you want a gift? üéÅ</p>
  <button onclick="giftQuestion(true)">Yes</button>
  <button onclick="giftQuestion(false)">No</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
  <p id="questionText"></p>
  <button onclick="giftQuestion(true)">Yes</button>
  <button onclick="giftQuestion(false)">No</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
  <h2>üéÅ Your Gift</h2>

  <img src="santa_walk.png" id="santaWalk">

  <div class="card-container">
    <div class="card" id="card" onclick="flipCard()">
      <div class="face front">Tap to open üéÑ</div>
      <div class="face back">
        I‚Äôm already your friend ‚ù§Ô∏è  
        You don‚Äôt need a gift üéÅ
      </div>
    </div>
  </div>

  <button onclick="share()">Share on WhatsApp</button>
</div>

<script>
/* Page switching */
function show(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* Music */
let musicStarted=false;
function startMusic(){
  if(!musicStarted){
    document.getElementById('music').play();
    musicStarted=true;
  }
}

/* Name logic */
function submitName(){
  startMusic();

  const name=document.getElementById('nameInput').value.trim();
  if(!name) return;

  let names=JSON.parse(localStorage.getItem('names')||'[]');
  names.push(name);
  localStorage.setItem('names',JSON.stringify(names));

  document.getElementById('wish').innerText=`üéÑ Merry Christmas ${name}!`;
  show('page2');
  renderNames();
}

function renderNames(){
  let names=JSON.parse(localStorage.getItem('names')||'[]');
  document.getElementById('list').innerHTML=
    "<h4>Previous wishes:</h4>"+names.join("<br>");
}
renderNames();

/* Gift logic */
function giftQuestion(ans){
  if(ans){
    const music=document.getElementById('music');
    music.pause();
    music.currentTime=0;

    show('page4');
    walkSanta();
  }else{
    document.getElementById('questionText').innerText=
      "Are you sure you don't want the gift? üéÅ";
    show('page3');
  }
}

/* Walking Santa */
function walkSanta(){
  const s=document.getElementById('santaWalk');
  s.style.transition='none';
  s.style.left='-260px';
  s.offsetHeight;
  s.style.transition='left 10s linear';
  s.style.left='110vw';
}

/* Card */
function flipCard(){
  document.getElementById('card').classList.toggle('flip');
  const bell=document.getElementById('bell');
  bell.currentTime=0;
  bell.play();
}

/* Snow */
for(let i=0;i<40;i++){
  const s=document.createElement('div');
  s.className='snow';
  s.innerText='‚ùÑ';
  s.style.left=Math.random()*100+'vw';
  s.style.animationDuration=5+Math.random()*5+'s';
  s.style.fontSize=12+Math.random()*18+'px';
  document.body.appendChild(s);
}

/* Share */
function share(){
  const text="üéÑ Merry Christmas! Check this surprise üéÅ";
  window.open(`https://wa.me/?text=${encodeURIComponent(text+" "+location.href)}`);
}
</script>

</body>
</html>
