<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Merry Christmas ğŸ„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Background Music -->
  <audio id="music" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #ffe4ec, #ffffff);
      text-align: center;
      overflow-x: hidden;
    }

    h1, h2, p { color: #b30059; }

    .page {
      display: none;
      min-height: 100vh;
      padding: 20px;
    }

    .active { display: block; }

    input, button {
      padding: 12px;
      margin: 10px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }

    button {
      background: #ff4d88;
      color: white;
      cursor: pointer;
    }

    ul { list-style: none; padding: 0; }

    img {
      width: 160px;
      max-width: 90%;
    }

    /* â„ï¸ Snow */
    .snowflake {
      position: fixed;
      top: -10px;
      color: white;
      animation: fall linear infinite;
      z-index: 0;
    }

    @keyframes fall {
      to { transform: translateY(110vh); }
    }

    /* ğŸ Flip Card */
    .card-container { perspective: 1000px; }

    .card {
      width: 260px;
      height: 160px;
      margin: 40px auto;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s;
      cursor: pointer;
    }

    .card.flip { transform: rotateY(180deg); }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px;
      font-size: 18px;
    }

    .front { background: #ff4d88; color: white; }
    .back  { background: white; color: #b30059; transform: rotateY(180deg); }

    /* ğŸ… Santa walk */
    #santaWalk {
      position: fixed;
      bottom: 0;
      left: -200px;
      width: 150px;
      transition: left 10s linear;
      z-index: 5;
    }

    @media (max-width: 600px) {
      h1 { font-size: 24px; }
    }
  </style>
</head>
<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
  <h1>ğŸ„ Christmas Wishes ğŸ„</h1>
  <p>Enter your name</p>
  <input type="text" id="nameInput" placeholder="Your name">
  <br>
  <button onclick="submitName()">Continue</button>

  <p id="visitorCounter"></p>

  <h3>Previous Visitors</h3>
  <ul id="nameList"></ul>

  <button onclick="toggleSnow()">â„ï¸ Toggle Snow</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
  <h1 id="wishText"></h1>

  <!-- Fixed positions -->
  <img src="grinch.png" style="position:fixed; bottom:0; left:10px;">
  <img src="santa.png"  style="position:fixed; bottom:0; right:10px;">

  <p>Do you want a gift? ğŸ</p>
  <button onclick="wantGift(true)">Yes</button>
  <button onclick="wantGift(false)">No</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
  <h2 id="confirmText"></h2>
  <button onclick="confirmGift(true)">Yes</button>
  <button onclick="confirmGift(false)">No</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
  <h1>ğŸ Your Gift ğŸ„</h1>
  <p>Tap the card</p>

  <div class="card-container">
    <div class="card" id="giftCard" onclick="flipCard()">
      <div class="card-face front">ğŸ„ Tap to Open ğŸ„</div>
      <div class="card-face back">
        â¤ï¸ Surprise â¤ï¸<br>
        I'm already your friend,<br>
        so you don't need any gift ğŸ˜ŠğŸ„
      </div>
    </div>
  </div>

  <button onclick="shareWhatsApp()">ğŸ“² Share on WhatsApp</button>

  <img id="santaWalk" src="santa_walk.png">
</div>

<script>
  /* â„ï¸ Snow */
  let snowflakes = [];
  let snowOn = true;

  for (let i = 0; i < 40; i++) {
    const s = document.createElement('div');
    s.className = 'snowflake';
    s.innerHTML = 'â„';
    s.style.left = Math.random() * 100 + 'vw';
    s.style.fontSize = 10 + Math.random() * 20 + 'px';
    s.style.animationDuration = 3 + Math.random() * 5 + 's';
    document.body.appendChild(s);
    snowflakes.push(s);
  }

  function toggleSnow() {
    snowflakes.forEach(s => s.style.display = snowOn ? 'none' : 'block');
    snowOn = !snowOn;
  }

  /* ğŸµ Music */
  const music = document.getElementById('music');
  document.body.addEventListener('click', () => music.play(), { once: true });

  /* ğŸ‘¥ Visitor counter */
  let visits = localStorage.getItem('visitCount') || 0;
  visits++;
  localStorage.setItem('visitCount', visits);
  document.getElementById('visitorCounter').innerText =
    `ğŸ„ ${visits} people already got Christmas wishes`;

  /* ğŸ”” Bell */
  const bell = new Audio('bell.mp3');

  let currentName = "";

  function submitName() {
    const name = document.getElementById('nameInput').value.trim();
    if (!name) return alert("Enter your name");

    currentName = name;

    // To CLEAR all previous users once, uncomment next line and refresh
    // localStorage.removeItem('names');

    let names = JSON.parse(localStorage.getItem('names')) || [];
    names.push(name);
    localStorage.setItem('names', JSON.stringify(names));

    renderNames();
    document.getElementById('wishText').innerText =
      `ğŸ„ Merry Christmas ${name}! ğŸ…`;

    switchPage('page1','page2');
  }

  function renderNames() {
    const list = document.getElementById('nameList');
    list.innerHTML = "";
    (JSON.parse(localStorage.getItem('names')) || []).forEach(n => {
      const li = document.createElement('li');
      li.innerText = n;
      list.appendChild(li);
    });
  }

  function wantGift(ans) {
    document.getElementById('confirmText').innerText =
      ans ? "Are you sure you want the gift? ğŸ"
          : "Are you sure you donâ€™t want the gift? ğŸ¤”";
    switchPage('page2','page3');
  }

  function confirmGift(ans) {
    if (ans) {
      switchPage('page3','page4');
      runSanta();
    } else {
      document.getElementById('confirmText').innerText =
        "Think again... Do you want the gift? ğŸ";
    }
  }

  function flipCard() {
    document.getElementById('giftCard').classList.toggle('flip');
    music.pause();
    music.currentTime = 0;
    bell.currentTime = 0;
    bell.play();
  }

  function runSanta() {
    const santa = document.getElementById('santaWalk');
    santa.style.transition = 'none';
    santa.style.left = '-200px';
    santa.offsetHeight;
    santa.style.transition = 'left 10s linear';
    santa.style.left = '110vw';
  }

  function shareWhatsApp() {
    const msg = `ğŸ„ I got my Christmas wish!\nMerry Christmas from ${currentName}! ğŸ\nCheck this out ğŸ‘‰ `;
    window.open(`https://wa.me/?text=${encodeURIComponent(msg + location.href)}`);
  }

  function switchPage(from,to) {
    document.getElementById(from).classList.remove('active');
    document.getElementById(to).classList.add('active');
  }

  renderNames();
</script>

</body>
</html>
